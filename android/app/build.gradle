apply plugin: 'com.android.application'
apply plugin: 'com.facebook.react'

/**
 * This is the main build script for your app's Android variant.
 * It's where you configure the Android build system for your app.
 */
android {
    // The `namespace` property is required for Android Gradle Plugin (AGP) 7.0 and higher.
    // It specifies the Java/Kotlin package name for your app's source code, R class, and BuildConfig.
    // The React Native CLI failed to find this, causing the build error.
    // IMPORTANT: Replace "com.yourcompany.yourapp" with your actual desired unique package name.
    // This should ideally match your `applicationId` and the `package` attribute in AndroidManifest.xml.
    namespace "com.yourcompany.yourapp"

    compileSdkVersion rootProject.ext.compileSdkVersion

    defaultConfig {
        applicationId "com.yourcompany.yourapp"
        minSdkVersion rootProject.ext.minSdkVersion
        targetSdkVersion rootProject.ext.targetSdkVersion
        versionCode 1
        versionName "1.0"

        // You can add other defaultConfig properties here as needed.
        // testInstrumentationRunner "androidx.test.runner.AndroidJUnitRunner"
    }

    buildTypes {
        release {
            // In a production app, you would configure your release signing config here.
            // For debugging or CI/CD, 'debug' signing is often used.
            signingConfig signingConfigs.debug
            minifyEnabled enableProguardInReleaseBuilds
            proguardFiles getDefaultProguardFile("proguard-android.txt"), "proguard-rules.pro"
        }
    }

    // Packaging options to control how your APK is packaged.
    packagingOptions {
        // Exclude specific files to avoid conflicts, if necessary.
        // pickFirst "**/libc++_shared.so"
    }

    // Other configurations like lint, testOptions, etc., might be here.
    // Ensure you merge this `namespace` addition with your existing `android { ... }` block.
}

// Dependencies for your app. Keep existing dependencies and add new ones as needed.
dependencies {
    // This line typically adds all .jar files in the libs directory.
    implementation fileTree(dir: "libs", include: ["*.jar"])
    
    // Ensure react-android is correctly implemented.
    implementation "com.facebook.react:react-android"

    // Add any other dependencies for your project here (e.g., native modules, Google Play services, etc.).
    // Example:
    // implementation "com.facebook.fresco:fresco:2.5.0"
}
